 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SJS Showroom | Professional Catalogue</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;500;600&display=swap');
:root{--gold:#B8860B;--cream:#FFFAF0;--dark:#2D2424}
body{font-family:'Poppins',sans-serif;background:var(--cream);color:var(--dark)}
.brand-font{font-family:'Playfair Display',serif}
.product-card{background:#fff;border-radius:1.5rem;border:1px solid rgba(184,134,11,.15);overflow:hidden;transition:.3s}
.product-card:hover{transform:translateY(-6px);box-shadow:0 18px 25px rgba(0,0,0,.1)}
.admin-only{display:none}
body.admin-active .admin-only{display:block}
.delete-btn{display:none;position:absolute;top:10px;right:10px;background:#ef4444;color:#fff;width:30px;height:30px;border-radius:50%}
body.admin-active .delete-btn{display:flex}
.toast{position:fixed;bottom:25px;left:50%;transform:translateX(-50%);background:#111;color:#fff;padding:14px 24px;border-radius:12px;opacity:0;transition:.3s;z-index:9999}
.toast.show{opacity:1}
</style>
</head>

<body>

<div id="toast" class="toast"></div>

<header class="text-center py-10 bg-white shadow">
<i class="fas fa-crown text-5xl text-[#B8860B]"></i>
<h1 class="brand-font text-4xl mt-3">Shree Jagadamba</h1>
<p class="tracking-[0.4em] text-[#B8860B] font-bold">SELECTION</p>
</header>

<!-- ADMIN PANEL -->
<section class="admin-only max-w-4xl mx-auto bg-white mt-10 p-8 rounded-3xl shadow">
<h2 class="brand-font text-2xl mb-6">Admin Dashboard</h2>

<input type="file" id="imgInp" accept="image/*" class="mb-4">

<input id="itemName" placeholder="Item Name" class="w-full p-3 border rounded mb-3">
<input id="itemPrice" placeholder="Price ₹" type="number" class="w-full p-3 border rounded mb-3">

<select id="itemCat" class="w-full p-3 border rounded mb-4">
<option value="Saree">Saree</option>
<option value="Kurti">Kurti</option>
</select>

<button id="uploadBtn" onclick="addItem()" class="w-full bg-[#B8860B] text-white py-4 rounded-xl font-bold">
Upload Karein
</button>
</section>

<!-- PRODUCTS -->
<main class="max-w-6xl mx-auto py-14 px-4">
<div id="pGrid" class="grid grid-cols-2 md:grid-cols-4 gap-6"></div>
<p id="noData" class="text-center text-gray-400 hidden">Abhi Stock Khali Hai</p>
</main>

<script>
const toast=(m,e=false)=>{
const t=document.getElementById('toast');
t.innerText=m;
t.style.background=e?'#ef4444':'#111';
t.classList.add('show');
setTimeout(()=>t.classList.remove('show'),3000);
};
</script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
import { getFirestore, collection, addDoc, onSnapshot, deleteDoc, doc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

/* FIREBASE CONFIG */
const firebaseConfig={
apiKey:"AIzaSyBLLLFfbzRzB4oE-LT4QxbUmukO6SVRJ4I",
authDomain:"my-side-11eef.firebaseapp.com",
projectId:"my-side-11eef",
appId:"1:85450849605:web:870172cbece91b6960922c"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);
const appId="shree-jagadamba-v21";

signInAnonymously(auth).then(loadData);

function loadData(){
const ref=collection(db,"artifacts",appId,"public","data","products");
onSnapshot(ref,snap=>{
const grid=document.getElementById('pGrid');
grid.innerHTML='';
snap.forEach(d=>{
const i=d.data();
const card=document.createElement('div');
card.className="product-card relative";
card.innerHTML=`
<button class="delete-btn" onclick="deleteItem('${d.id}')"><i class="fas fa-trash"></i></button>
<img src="${i.img}" class="w-full h-60 object-cover">
<div class="p-4 text-center">
<h4 class="font-bold">${i.n}</h4>
<p class="text-[#B8860B] font-black">₹${i.p.toLocaleString()}</p>
</div>`;
grid.appendChild(card);
});
document.getElementById('noData').classList.toggle('hidden',snap.size>0);
});
}

/* UPLOAD */
window.addItem=async()=>{
const n=itemName.value.trim();
const p=Number(itemPrice.value);
const c=itemCat.value;
const f=imgInp.files[0];

if(!n||!p||!f){toast("Puri details bharo",true);return}

uploadBtn.disabled=true;
uploadBtn.innerText="Uploading...";

try{
const fd=new FormData();
fd.append("file",f);
fd.append("upload_preset","my_upload");

const res=await fetch("https://api.cloudinary.com/v1_1/dkxmgxkgb/image/upload",{method:"POST",body:fd});
const data=await res.json();
if(!data.secure_url) throw "Upload fail";

await addDoc(collection(db,"artifacts",appId,"public","data","products"),{
n,p,cat:c,img:data.secure_url,timestamp:serverTimestamp()
});

toast("Item add ho gaya ✅");
itemName.value=itemPrice.value="";
imgInp.value="";

}catch(e){
toast("Upload fail hua",true);
console.error(e);
}finally{
uploadBtn.disabled=false;
uploadBtn.innerText="Upload Karein";
}
}

/* DELETE */
window.deleteItem=async(id)=>{
if(!confirm("Delete karein?")) return;
await deleteDoc(doc(db,"artifacts",appId,"public","data","products",id));
toast("Item hata diya");
}

if(localStorage.getItem("admin")==="1")document.body.classList.add("admin-active");
window.enableAdmin=()=>{localStorage.setItem("admin","1");location.reload()}
</script>

</body>
</html>
